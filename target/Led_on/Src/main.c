/**
  ******************************************************************************
  * @file    main.c
  * @author  Auto-generated by STM32CubeIDE
  * @version V1.0
  * @brief   Default main function.
  ******************************************************************************
*/
#include<stdint.h>

int main(void)
{
	/* All peripheral registers are of 32 bits. So, that's why,
	 * we selected unit32_t and also addresses are always unsigned.*/

	/* We can't express pointer variable like
	 * uint32_t* pClkctrlreg = 0x40023830, because 0x40023830 is a number
	 * for the compiler. So we have to tell the compiler that this is a
	 * pointer. That's why we have to use type casting:
	 * (unit32_t*) 0x40023830 - now this is a pointer entity*/

	uint32_t* pClkctrlReg = (uint32_t*) 0x40023830;//pClkctrlreg - clock register
	uint32_t* pPortDModeReg = (uint32_t*) 0x40020C00;
	uint32_t* pPortDOutReg = (uint32_t*) 0x40020C14;


	//1. Enable the clock for DPOID peripheral in the AHB1ENR



	/*We will read the content of address into temporary variable. So we are
	dereferencing the pointer and storing the value into temporary variable.
	*/
	uint32_t temp = *pClkctrlReg;//read operation

	/*Now we are modifying temporary variable.
	 * We are using  mask value (0x00000008) to set appropriate (third) bit */

	temp = temp | 0x08;//modify operation

	/* After that we are writing back to this address */

	*pClkctrlReg = temp;//write back operation

	/* We can replace all above mentioned operation by only one line
	 * using pointer dereferencing:
	 *
	 *   *pClkctrlReg = *pClkctrlReg | 0x08;
	 *
	 *   Or we can use 'C' shorthand notation
	 *
	 *   *pClkctrlReg |= 0x08;
	 *
	 * */

	//2. Configure the mode of the IO pin as output

	/* a. clear the 24th and 25th bit positions (CLEAR).
	 * The mask value for clearing will be 0xFCFFFFFF*/

	*pPortDModeReg &= 0xFCFFFFFF;

	 /* b. make 24th bit position as 1 (SET)
	  * The mask value for setting will be 0x0100000*/

	*pPortDModeReg |= 0x01000000;

	//3. Set 12th bit of the output data register to make I/O pin-12 as High

	/* For setting 12th bit we will use mask value 0x1000*/

	*pPortDOutReg |= 0x1000;

	/* This is just like creating an infinite loop. So, this application
	 * just turns on the LED and then just hangs*/


	while(1);


}








